---
layout: default
title: Home
---
{% assign featured = site.posts | where: "featured", true | first %}

<section class="hero-section">
  <div class="hero-content">
    {% if featured %}
      <h1 class="hero-title">{{ featured.title }}</h1>
      <p class="hero-author">by {{ featured.author }}</p>
      {% if featured.cover %}
        <img
          src="{{ featured.cover | relative_url }}"
          alt="{{ featured.title }} cover"
          class="hero-cover">
      {% endif %}
    {% else %}
      <h1 class="hero-title">{{ site.title }}</h1>
      <p class="hero-author">Your home for book reviews</p>
    {% endif %}
  </div>
</section>

<div class="page-content">
  <aside class="sidebar">
    <div class="filters">
      <h2>Filters</h2>
      <input type="text" id="search" placeholder="Search reviews…">
      <select id="author-filter">
        <option value="">All Authors</option>
        {% assign authors = site.posts | map: "author" | uniq | sort %}
        {% for author in authors %}
          <option value="{{ author }}">{{ author }}</option>
        {% endfor %}
      </select>
      <select id="genre-filter">
        <option value="">All Genres</option>
        {% assign genres = site.posts | map: "genre" | uniq | sort %}
        {% for g in genres %}
          <option value="{{ g }}">{{ g }}</option>
        {% endfor %}
      </select>
      <select id="rating-filter">
        <option value="">All Ratings</option>
        {% for r in "0,0.5,1,1.5,2,2.5,3,3.5,4,4.5,5" | split: "," %}
          <option value="{{ r }}">{{ r }}+</option>
        {% endfor %}
      </select>
      <select id="year-filter">
        <option value="">All Years</option>
        {% assign years = site.posts 
          | map: "publication_date" 
          | map: "date" 
          | map: "year" 
          | uniq 
          | sort %}
        {% for y in years %}
          <option value="{{ y }}">{{ y }}</option>
        {% endfor %}
      </select>
    </div>
  </aside>

  <main class="reviews">
    <div class="featured-carousel">
      {% for post in site.posts %}
        {% if post.featured %}
          <div class="featured-item">
            <a href="{{ post.url | relative_url }}">
              {% if post.cover %}
                <img
                  src="{{ post.cover | relative_url }}"
                  alt="{{ post.title }} cover"
                  loading="lazy">
              {% endif %}
              <h3>{{ post.title }}</h3>
            </a>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <div class="summary">
      <p><strong>Top Authors:</strong> <span id="top-authors"></span></p>
      <p><strong>Popular Genres:</strong> <span id="top-genres"></span></p>
    </div>

    {% for post in site.posts %}
      {% unless post.featured %}
        <article class="review"
                 data-author="{{ post.author }}"
                 data-tags="{{ post.tags | join:',' }}"
                 data-genre="{{ post.genre }}"
                 data-rating="{{ post.rating }}"
                 data-year="{{ post.publication_date | date: '%Y' }}"
                 data-excerpt="{{ post.excerpt | strip_html | escape }}">
          <h2><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h2>
          <p class="meta">
            by {{ post.author }} — {{ post.date | date: '%B %d, %Y' }}
          </p>
          {% if post.cover %}
            <img
              src="{{ post.cover | relative_url }}"
              alt="{{ post.title }} cover"
              class="cover"
              loading="lazy">
          {% endif %}
          {% if post.rating %}
            <p class="rating">★ {{ post.rating }}</p>
          {% endif %}
          {% if post.tags %}
            <p class="tags">{{ post.tags | array_to_sentence_string }}</p>
          {% endif %}
          <p>{{ post.excerpt | strip_html | truncate: 160 }}</p>
          <a href="{{ post.url | relative_url }}" class="btn btn-primary">
            Read More
          </a>
        </article>
      {% endunless %}
    {% endfor %}
  </main>
</div>
